
import React, { useState, useEffect } from 'react';
import { ViewState, Theme } from '../types';
import { Menu, X, BarChart3, PlusCircle, List, Sun, Moon, Info, Check } from 'lucide-react';
import { PROJ_NAME, PROJ_VERSION, PROJ_DESCRIPTION, PROJ_ICON } from '../constants';

var Build = 251215.01
var Proj_version_full = PROJ_VERSION + "." + Build;

interface HeaderProps {
  currentView: ViewState;
  onNavigate: (view: ViewState) => void;
  theme: Theme;
  toggleTheme: () => void;
}

const BrandIcon = ({ className, style }: { className?: string, style?: React.CSSProperties }) => (
  <svg 
    xmlns="http://www.w3.org/2000/svg" 
    xmlnsXlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 16 16" 
    xmlSpace="preserve"
    className={className}
    style={{ fill: 'var(--proj-icon-color)', ...style }}>
    <path d="M3,2.5C3,2.2,3.2,2,3.5,2h5C8.8,2,9,2.2,9,2.5v5C9,7.8,8.8,8,8.5,8h-5C3.2,8,3,7.8,3,7.5V2.5z"></path>
    <path d="M1,2c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v8c1.1,0,2,0.9,2,2v0.5c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5V8h-0.5  C13.2,8,13,7.8,13,7.5V4.4c0-0.3,0.2-0.5,0.5-0.5H15c0-0.5-0.1-0.9-0.2-1.2c-0.1-0.2-0.2-0.4-0.4-0.5C14.2,2.1,13.9,2,13.5,2  C13.2,2,13,1.8,13,1.5S13.2,1,13.5,1c0.6,0,1,0.1,1.4,0.3c0.4,0.2,0.6,0.6,0.8,0.9C16,2.9,16,3.7,16,4.3v3.2C16,7.8,15.8,8,15.5,8  c0,0,0,0,0,0H15v4.5c0,0.8-0.7,1.5-1.5,1.5S12,13.3,12,12.5V12c0-0.6-0.4-1-1-1v4h0.5c0.3,0,0.5,0.2,0.5,0.5S11.8,16,11.5,16h-11  C0.2,16,0,15.8,0,15.5S0.2,15,0.5,15H1V2z M10,2c0-0.6-0.4-1-1-1H3C2.4,1,2,1.4,2,2v13h8V2z"></path>
  </svg>
);

const BrandIconFill = ({ className, style }: { className?: string, style?: React.CSSProperties }) => (
  <svg 
    xmlns="http://www.w3.org/2000/svg" 
    xmlnsXlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 16 16" 
    xmlSpace="preserve"
    className={className} 
    style={{ fill: 'var(--proj-icon-color)', ...style }}>
    <path d="M1,2c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v8c1.1,0,2,0.9,2,2v0.5c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5V8h-0.5	C13.2,8,13,7.8,13,7.5V4.4c0-0.3,0.2-0.5,0.5-0.5H15c0-0.5-0.1-0.9-0.2-1.2c-0.1-0.2-0.2-0.4-0.4-0.5C14.2,2.1,13.9,2,13.5,2	C13.2,2,13,1.8,13,1.5S13.2,1,13.5,1c0.6,0,1,0.1,1.4,0.3c0.4,0.2,0.6,0.6,0.8,0.9C16,2.9,16,3.7,16,4.3v3.2C16,7.8,15.8,8,15.5,8	c0,0,0,0,0,0H15v4.5c0,0.8-0.7,1.5-1.5,1.5S12,13.3,12,12.5V12c0-0.6-0.4-1-1-1v4h0.5c0.3,0,0.5,0.2,0.5,0.5S11.8,16,11.5,16h-11	C0.2,16,0,15.8,0,15.5S0.2,15,0.5,15H1V2z M9,2.4C9,2.2,8.7,2,8.3,2H3.8C3.3,2,3,2.2,3,2.4V8h6V2.4z"/>
  </svg>
);

const FuoneBrand = ({className, style }: {className?: string, style?: React.CSSProperties }) => (
  <svg
    id="fuoneIcon"
    xmlns="http://www.w3.org/2000/svg" 
    xmlnsXlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 563 399" 
    xmlSpace="preserve"
    className= {('fuone-icon ') + className}
    style={{ fill: 'var(--f-icon-color-full,(--proj-icon-color))', ...style }}>
    <path className="f-icon-color-1" d="M23.7,279.6c17.2,27.1,40.8,45.9,71.1,55.8c21.3,7,43.2,8.6,65.6,6.9c23.7-1.8,46.3-7,68.5-15.2c4.5-1.7,6.7-4.4,7-8.9	c1.1-16.7,2.3-33.4,2.9-50.1c0.2-7.2-1.1-14.5-1.8-22.3c-6.7,3.5-12.8,7.1-19.2,9.8c-33,13.7-66.2,15.7-98.8-0.8	c-20-10.1-33-26.9-36.6-49c-2.9-17.7,1.7-34.7,13.4-48.9c14.6-17.8,33.5-27.3,56.8-26.7c17.8,0.4,32.8,8.4,46.4,19.4	c26.7,21.5,41.1,50.6,48.8,83.1c3.5,14.9,5.5,30.3,6,45.6c1.2,34.4-8.3,66.5-24.2,96.8c-3.4,6.5-7,13-10.5,19.4	c0.3,0.3,0.7,0.5,1,0.8c6.5-7.8,13.3-15.3,19.5-23.4c18.2-23.7,32.1-49.6,39.7-78.7c4.8-18.4,7-37,6.9-56	c-0.3-30.3-3.3-60-14.2-88.6c-9.1-23.9-22.1-45.2-40.8-62.8c-18.8-17.7-40.9-29-66.7-32.9c-4.2-0.6-8.3-1.3-12.5-1.9c-5,0-10,0-15,0	c-6.3,1-12.6,1.7-18.8,3C92.7,59.7,69,69.4,48.8,86.6c-24.7,21-38.5,48.3-45.6,79.3c-1.4,6.2-1.5,12.7-2.2,19c-0.1,1-0.6,2-1,3	c0,5.7,0,11.3,0,17c0.7,4.3,1.3,8.5,2,12.8C5.3,239.8,11.7,260.6,23.7,279.6z"/>
    <path className="f-icon-color-2" d="M563,200.9c-0.7,5-1.3,10.1-2,15.1c-4.1,31.7-14.1,61-35.2,85.8c-19,22.4-42.4,37.6-70.9,44.4c-44.4,10.6-82.9,0-114.1-33.9	c-15.9-17.2-26.4-37.8-31.8-60.5c-5-20.8-8.3-42-12.2-63c-4.4-24.2-10.1-48-22-69.8c-8.4-15.5-18.4-29.9-30.2-43	c-8.2-9-16.6-17.9-25.4-26.4C203,34.1,184.5,21.2,165.1,9.5c-2.6-1.6-5.2-3.2-7.5-5.7c3.2,0.7,6.4,1.3,9.5,2.2	c23,7.1,46,14.5,67.3,26c36.1,19.5,63.5,47.8,82.8,83.9c12.8,24,20.3,50.1,29.9,75.4c4.9,13,9.6,26.5,17,38	c14.4,22.2,35.7,33.7,62.7,31.5c17.2-1.4,30.2-11.2,40.9-24.3c32.2-39.8,8.9-91.2-29.9-105.4c-25.2-9.2-48.1-4.3-68.4,13	c-4.6,3.9-8.8,8.2-13.5,12.6c-10.2-25-22.6-49.3-39.4-72.3c8.4-5.3,16.1-10.6,24.3-15.3c27.6-15.8,57.7-21.8,89.1-18.9	c59.7,5.6,111,44.6,127.6,105.3c2.5,9.2,3,18.9,4.5,28.3c0.2,1.4,0.6,2.8,1,4.2C563,192.3,563,196.6,563,200.9z"/>
  </svg>
);

const FuoneBrand2 = ({className, style }: {className?: string, style?: React.CSSProperties }) => (
  <svg
    id="fuoneIcon2"
    xmlns="http://www.w3.org/2000/svg" 
    xmlnsXlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 3432 1717" 
    xmlSpace="preserve"
    className= {('fuone-icon ') + className}
    style={{ fill: 'var(--f-icon-color-full,(--proj-icon-color))', ...style }}>
    <g>
      <path className="f-icon-color-1" fill="#4D4D4D" d="M722,492.1c0.6,1.1,1.6,1,2.6,1c13-0.4,25.9,0.2,38.8,1.1c15.6,1,31.3,2.1,46.9,3.7   c10.2,1,20.3,1.9,30.5,3.2c13,1.7,26.2,3,39.1,5.2c18.6,3.2,37.2,6.5,55.6,10.6c17.3,3.9,34.5,8.1,51.5,13   c5.7,1.6,11.4,3.1,16.7,6.1c-4.7-0.7-9.4-1.4-14.1-2.2c-7.9-1.5-16-2.1-24-2.9c-9-0.9-17.9-1.1-26.8-0.8   c-23.6,0.7-46.8,4.4-69.6,10.8c-24.2,6.8-47.2,16.6-69.3,28.3c-27.1,14.3-52.8,30.9-77.5,49c-14.1,10.3-28.3,20.4-42.2,30.9   c-20.9,15.7-41.6,31.7-62.3,47.7c-13.8,10.7-27.3,21.8-40.8,32.8c-6.3,5.1-12.3,10.6-18.2,16.1c-9.2,8.6-18.6,17.1-27.2,26.3   c-17.9,19.2-35.2,38.9-51.2,59.8c-21.1,27.4-41.3,55.4-60.1,84.4c-21.7,33.6-40.5,68.6-52.8,106.8c-7.5,23.3-13,47.1-17.4,71.2   c-3.6,20-7.1,40.1-9.9,60.3c-1.9,13.5-3,27.2-4.4,40.8c-1.8,18.2-2.2,36.4-1.7,54.7c0.5,19.6,2.8,39.1,7.1,58.3   c4.5,20.3,11.6,39.7,21.5,58.1c8.3,15.3,18.6,29.1,30.1,42.1c13.5,15.2,28.9,27.9,45.9,38.9c20.8,13.4,43.4,22.3,67.8,26.8   c17.1,3.2,34.4,3.5,51.5,2.5c19.5-1.1,38.9-4,58.4-6.6c44.4-5.9,88-15.1,131.2-26.4c20.2-5.3,40.1-11.3,60-17.6   c20.5-6.5,41-13.2,61.3-20.2c37.6-13,74.6-27.5,111.5-42.2c38.9-15.5,77.3-32.3,117.3-45.2c5.5-1.8,11.1-3,16.7-4.3   c2.4-0.6,5.2-0.9,6.7,1.7c1.6,2.8-0.6,4.6-2.2,6.4c-11.1,12.2-24.3,21.9-37.6,31.4c-25.4,18.2-52,34.6-78.7,50.8   c-21.1,12.7-42.7,24.8-64,37.2c-24.8,14.4-49.5,28.8-74.3,43.1c-15.8,9.1-31.9,17.8-47.7,26.9c-21.8,12.5-44.1,23.8-66.7,34.7   c-20.7,10-42.1,18.6-63.8,26.4c-32.2,11.7-65,20.9-98.3,28.6c-22.9,5.3-45.9,9.8-69.1,13.7c-16.7,2.8-33.4,5.2-50.2,7.7   c-10.1,1.5-20.3,2.1-30.5,3.2c-16.8,1.7-33.6,3.3-50.5,3.1c-0.5,0-1.1,0.6-1.6,0.9c-13,0-26,0-39,0c-7.2-1.3-14.6-0.8-21.8-0.8   c-38.2-0.2-74.2-9.9-109.1-24.1c-41.3-16.9-78.8-40.4-112.9-69.2c-42.3-35.6-70.2-80.4-84.6-133.9c-8-29.8-13.6-60.1-16.3-90.8   c-0.8-9.1-1-18.2-1.2-27.3c-0.3-11.8-0.8-23.6-0.5-35.4c0-0.8,0.1-1.7-0.5-2.4c0-11.3,0-22.7,0-34c1-1.7,0.5-3.6,0.5-5.4   c0-18.7,0.2-37.4,2.3-55.9c3.3-28.8,9.8-57.1,17.3-85.1c12.7-47.6,28.7-94,47.4-139.5c23-56.1,50.2-110,82.8-161.1   c28.5-44.7,60.3-87.1,94.4-127.7c19.3-22.9,39-45.5,60-67c0.3-0.4,0.7-0.7,1-1.1c3.9-5.4,8.9-8.8,15.3-11.3   c11.1-4.4,22-9.6,33.2-13.9c33.7-12.9,68.3-22.6,103.5-30.2c31.8-6.9,63.8-12,96.1-15.9c20.5-2.5,41.2-4,61.9-4.4   c16.9-0.3,33.9-1,50.8-1c0.8,0,1.7,0.1,2.4-0.5C686.6,492.1,704.3,492.1,722,492.1z"/>
    </g>
    <g>
      <path className="f-icon-color-2" fill="#1A1A1A" d="M964.1,232.1c1,1.7,2.7,1,4.1,1c22.6,0.2,45,2.7,67.4,5.9c32.2,4.5,63.7,12.1,94.3,23   c38.2,13.6,73.5,32.4,105.6,57.1c11.7,8.9,22.6,18.6,33.6,28.4c12.6,11.1,24,23.5,35.3,35.8c15.5,17,30.1,34.9,44.4,53   c24,30.5,46.8,61.7,69.2,93.4c25.8,36.4,50.5,73.6,74.9,110.9c21.5,32.9,42.7,66.1,63.2,99.7c16.2,26.6,32.8,53,49.1,79.5   c15.7,25.6,31.2,51.3,46.7,77c13.7,22.6,27.3,45.2,41.2,67.6c17.5,28.3,35,56.6,52.9,84.7c15.3,24.1,31,47.9,46.9,71.6   c24.7,36.8,50.4,72.8,77.2,108.1c16,21.1,32.1,42,48.8,62.5c14,17.2,28.2,34.4,42.8,51.2c11.2,12.8,22.2,25.8,33.5,38.4   c13.8,15.4,27.8,30.6,41.8,45.9c27.7,30.4,56.9,59.3,86.4,87.9c22,21.4,45.1,41.6,69.6,60.1c19,14.4,38.7,27.8,59.9,38.6   c23.9,12.1,49.5,20,75.7,25.6c12.8,2.7,25.6,5.3,38.4,8.1c4.1,0.9,8.2,2.1,10.8,5.9c0,0.3,0,0.7,0,1c-0.8,6.5-5.5,9.4-10.6,12.1   c-17.8,9.3-36.8,15.6-55.9,21.5c-30.4,9.4-61.2,17.5-92.5,23.3c-16.8,3.1-33.7,4.5-50.7,5.2c-6.8,0.3-13.6-0.3-20.3,0.9   c-15.3,0-30.7,0-46,0c-1-1.7-2.7-0.9-4.1-1c-16.2-0.3-32.1-2.6-48.1-4.9c-28.3-4-55.9-10.8-82.9-20.2   c-29.4-10.2-57.2-23.9-83.7-40.2c-21-12.9-41-27.3-60.2-42.6c-10.6-8.4-20.7-17.4-30.8-26.4c-16-14-31.1-29-45.9-44.3   c-15.1-15.5-29.1-32-43-48.6c-28.4-34-53.1-70.6-77.2-107.5c-16.2-24.9-31.6-50.3-46.8-75.8c-13.9-23.2-27.9-46.4-41.7-69.7   c-12.3-20.9-24.4-42-36.6-63c-18.2-31.1-35-62.9-50.6-95.4c-14.8-30.8-29.6-61.7-45.3-92.1c-14.6-28.5-30.6-56.2-47.4-83.5   c-13.5-21.9-27.5-43.5-41.8-65c-20-30-40.5-59.7-61.1-89.3c-16.5-23.7-33.4-47.2-51.5-69.7c-15.4-19.1-31.9-37.3-49.9-54   c-26.4-24.3-55-45.4-87.7-60.6c-14.1-6.6-28.9-11.3-43.7-16.4c-22.6-7.8-45.5-14.7-68.7-20.3c-20.7-5-41.5-9.2-62.5-12.8   c-16.6-2.9-33.3-5.5-50.1-7.5c-11.4-1.4-22.9-2.4-34.4-3.5c-14.9-1.5-29.9-2.4-44.8-3.5c-9.7-0.7-19.5-1.3-29.3-1.3   c-19.4,0-38.8,0.3-58.1,0c-26.2-0.4-52.3,1.6-78.5,3.2c-16.6,1-33.1,2.7-49.6,5c-16.7,2.3-33.4,4.7-50.1,7.6   c-24.2,4.2-48.3,9.1-72.1,15.2c-30.2,7.7-59.8,17-88.5,29.4c-7.2,3.1-14.3,6.3-22.6,9.9c1.8-1.9,2.7-3.1,3.8-4.2   c9.6-9.7,19.1-19.5,29-28.9c18-17.1,36.2-34,54.9-50.2c15.4-13.4,30.9-26.7,46.9-39.5c21.2-17,43-33.5,65-49.6   c19.6-14.3,39.5-28.3,59.7-41.7c23.5-15.6,47.5-30.4,72.1-44.3c38.9-21.9,79-40.8,121.7-53.9c23.4-7.1,47.1-12.5,71.3-16.1   c18.7-2.8,37.5-4.8,56.4-6.1c7-0.5,13.9-0.4,20.8-0.8c1.5-0.1,3.4,0.8,4.6-1C934.1,232.1,949.1,232.1,964.1,232.1z"/>
    </g>
    <g>
      <path className="f-icon-color-3" fill="#1A1A1A" d="M2710,1225c-1.5-0.4-3-1-4.4-1.1c-13.8-0.4-27.6-0.3-41.3-1.2c-18.1-1.2-36.1-3-54.1-4.9   c-17.1-1.8-34.3-3.3-51.3-6.2c-24.8-4.2-49.5-9.1-74-14.6c-18-4-35.6-9.4-53.4-14.2c-1.1-0.3-2.1-0.8-4.4-1.8   c8.3,1.2,15.3,2.2,22.3,3.2c4,0.6,8.1,1.6,12.1,1.8c12.1,0.5,24.2,1.5,36.3,0.9c35.3-1.7,69.2-9.7,101.8-23.5   c36.9-15.6,70.7-36.3,103.2-59.5c22.9-16.4,45.5-33.2,68.1-50.1c17.2-12.9,34.3-25.9,51.1-39.2c13-10.3,25.7-21.1,38.2-32.1   c12.5-11,25.4-21.9,36.8-34c16.6-17.6,32.4-36,47.9-54.7c24.5-29.6,46.5-61,67.2-93.2c19.3-29.9,36.4-60.9,48.4-94.6   c9.3-25.9,16-52.4,20.8-79.5c3.8-21.4,7.7-42.8,10.9-64.3c2-13.5,3.3-27.1,4-40.7c1.1-19.5,2.6-39.1,1.8-58.6   c-0.8-18.1-3.6-36.2-7-54.1c-3.7-20-10.5-39.2-20.9-56.8c-7.4-12.5-16-24.3-24.5-36.1c-4.5-6.2-9.8-12.1-15.4-17.4   c-16.8-16.1-35.2-30.1-56.3-40.2c-17.1-8.2-35-14.8-54.1-16.3c-15.3-1.3-30.8-2.6-46.1-1.8c-19.5,1.1-38.8,4.3-58.2,6.7   c-44.4,5.4-87.9,15-131.1,26.2c-19.3,5-38.3,10.9-57.3,16.8c-21.5,6.7-43.1,13.4-64.2,21.1c-35.6,12.9-70.9,26.6-106.3,40.1   c-41.6,15.9-83.2,32-124.8,47.8c-4.7,1.8-9.7,2.9-14.7,3.7c-1.9,0.3-4.2-1.1-6.3-1.7c0.7-2,0.8-4.5,2.1-5.9   c11-12.4,24.1-22.5,37.9-31.6c26-17.3,52.2-34.4,78.7-50.8c21-13,42.7-24.9,64.1-37.3c24.6-14.3,49.2-28.7,73.9-42.8   c18.7-10.7,37.5-21.4,56.6-31.7c19.1-10.3,38.1-20.6,57.8-29.7c21-9.7,42.5-18.5,64.2-26.8c32.1-12.2,65.2-21.1,98.6-28.8   c20.8-4.8,41.9-8.5,63-12.4c15.9-2.9,31.9-5.6,47.9-7.9c12.8-1.8,25.8-3.1,38.7-4.1c16.8-1.3,33.6-2.1,50.4-3.2c0.5,0,1-0.7,1.4-1   c13,0,26,0,39,0c1.3,0.4,2.6,1,3.9,1.1c5.8,0.4,11.6,0.4,17.3,1.1c13.2,1.5,26.4,2.8,39.5,5c31.6,5.3,61.7,15.7,90.5,29.7   c25.2,12.2,49,27.1,71.5,43.7c18.6,13.7,36,29,50.9,46.8c15.5,18.5,28.5,38.7,38.1,61.1c10.2,24,17.5,48.9,22.1,74.5   c2.8,15.3,5,30.7,7.1,46.1c1.7,12.9,3,25.8,3.9,38.7c0.8,11.2,0.7,22.5,1.1,33.8c0,0.8,0.7,1.6,1.1,2.4c0,11.3,0,22.7,0,34   c-0.4,0.6-1.1,1.3-1,1.9c0.1,21.3-1.6,42.5-5.1,63.5c-3.1,18.7-5.9,37.5-10.4,55.9c-6.4,25.8-13.8,51.4-21.7,76.8   c-6.2,19.8-13.3,39.3-20.9,58.6c-10.9,27.5-22.2,54.9-34.4,81.8c-9,19.8-19.4,39.1-30,58.2c-10.3,18.6-21.2,36.9-32.7,54.8   c-20.1,31.3-41.6,61.6-65.3,90.4c-20,24.2-40.6,48-60.9,72c-4.2,4.9-8,10.2-12.8,14.4c-9,7.9-14.3,19.7-27,23.6   c-7.8,2.4-14.8,7-22.4,9.9c-31,11.8-62.3,22.5-94.8,29.4c-24,5.1-47.9,10.4-72,14.6c-20.3,3.5-40.9,5.9-61.4,8.1   c-17,1.9-34.1,3.1-51.2,4c-13.4,0.8-26.9,0.7-40.3,1.1c-1.5,0-3,0.7-4.4,1.1C2745.3,1225,2727.7,1225,2710,1225z"/>
    </g>
    <g>
      <path className="f-icon-color-4" fill="#4D4D4D" d="M2467.9,1484.9c-0.9-1.5-2.4-1-3.6-1c-22.8-0.2-45.4-2.7-68-5.9c-32.5-4.5-64.2-12.2-95-23.3   c-37.9-13.6-73-32.3-105-57c-11.4-8.8-22.2-18.2-32.9-27.7c-12.6-11.1-24-23.4-35.3-35.8c-15.6-17-30.2-34.9-44.5-53   c-23.6-29.8-46.2-60.4-67.9-91.5c-26.3-37.6-51.8-75.8-77.1-114c-19.1-28.9-37.6-58.3-55.9-87.8c-19.5-31.3-38.5-62.8-57.7-94.2   c-21.9-35.8-44-71.4-65.7-107.3c-20.1-33.4-40.6-66.5-61.3-99.5c-19.1-30.3-38.5-60.5-58.6-90.2c-26.3-39-53.7-77.2-82.1-114.7   c-14.3-18.9-29.1-37.4-43.9-55.9c-10.3-12.8-21.1-25.3-31.8-37.9c-13.1-15.5-26.2-31-39.4-46.4c-6.2-7.1-12.5-14.1-19-21   c-15.5-16.6-30.9-33.3-46.5-49.8c-22.3-23.6-45.6-46.3-68.6-69.1c-13.1-13-27-25.4-41.2-37.3c-25.5-21.3-51.8-41.6-81.3-57.4   c-24.9-13.3-51.2-22.2-78.6-28.1c-14.1-3-28.3-5.9-42.4-9.1c-3.9-0.9-7.9-2.2-10.4-5.9c0-0.3,0-0.7,0-1c0.8-6.5,5.5-9.4,10.6-12.1   c17.8-9.3,36.8-15.6,55.9-21.5c30.4-9.4,61.2-17.5,92.5-23.3c16.8-3.1,33.7-4.5,50.7-5.2c6.8-0.3,13.6,0.3,20.3-0.9   c15.3,0,30.7,0,46,0c0.9,1.5,2.4,1,3.6,1c16.4,0.3,32.5,2.6,48.7,4.9c28.2,4,55.8,10.8,82.7,20.1c29.5,10.2,57.3,23.9,83.9,40.3   c20.9,12.9,40.8,27.2,60,42.4c10.6,8.4,20.7,17.5,30.9,26.4c16.5,14.5,32,30,47.3,45.7c14.6,15.1,28.2,31.1,41.6,47.2   c28.3,34,53,70.5,77.1,107.4c17.3,26.6,33.7,53.8,50,81c12.9,21.6,26,43.1,38.8,64.8c13.6,23.1,27,46.4,40.4,69.6   c16.7,29,32.4,58.6,46.8,88.8c14.6,30.5,29.3,61,44.7,91.1c14.8,28.9,30.9,57,48.1,84.6c13.5,21.7,27.2,43.1,41.4,64.3   c20.3,30.2,40.7,60.2,61.5,90c13,18.6,26.3,37,40.1,55c10.5,13.8,21.7,27,33.3,39.9c8.2,9,16.6,17.7,25.4,26   c21.6,20.4,45,38.6,71.1,53.2c18.6,10.4,38.3,18,58.5,24.8c24.1,8.2,48.4,15.9,73.1,21.8c22.5,5.4,45.2,10,68,13.8   c14.8,2.5,29.5,4.7,44.4,6.5c11.4,1.4,23,2.4,34.4,3.5c15.1,1.5,30.3,2.6,45.4,3.5c15.9,0.9,31.8,1.6,47.8,1.3   c20.7-0.4,41.4,0.2,62.2-0.2c13.9-0.2,27.8-1,41.7-2c15-1,29.9-2.2,44.8-4c22.8-2.7,45.6-5.7,68.3-9.6c24.4-4.2,48.7-9.2,72.7-15.3   c29.9-7.7,59.4-16.9,87.8-29.2c7.2-3.1,14.4-6.3,22.6-9.9c-1.5,1.8-2.4,2.8-3.3,3.8c-9.9,9.9-19.6,20-29.7,29.6   c-17.9,17-36,33.7-54.6,49.9c-17.1,14.8-34.3,29.5-51.9,43.6c-20.8,16.6-42.1,32.7-63.7,48.3c-18.7,13.5-37.6,26.6-56.7,39.4   c-25.9,17.2-52.4,33.5-79.7,48.5c-36,19.8-73.2,36.8-112.5,49c-21.3,6.6-43.1,11.6-65.2,15.2c-16.4,2.7-32.9,4.8-49.5,6.1   c-11.7,0.9-23.4,2-35.2,1.9c-1.4,0-3-0.7-4.1,1C2497.9,1484.9,2482.9,1484.9,2467.9,1484.9z"/>
    </g>
  </svg>
);

const FuoneBrand3 = ({className, style }: {className?: string, style?: React.CSSProperties }) => (
  <svg
    id="fuoneIcon2"
    xmlns="http://www.w3.org/2000/svg" 
    xmlnsXlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 1116.66 526.28" 
    xmlSpace="preserve"
    className= {('fuone-icon ') + className}
    style={{ fill: 'var(--f-icon-color-full,(--proj-icon-color))', ...style }}>
    <path className="f-icon-color-1" d="M270.91,531.85c-5.34-.2-9.13.08-14.15,0a19.55,19.55,0,0,0-3.53-.15c-21,0-41.63-3.4-62.14-7.85-22.54-4.88-43.7-13.37-63.8-24.34a255.89,255.89,0,0,1-35.88-23.88c-16-12.6-28.5-27.93-40.53-44.06-14.52-19.47-24.32-41.24-32-63.9C12.89,350,8.3,331.78,7,312.9,6.29,303,4.66,293,5.21,283c1.07-19.55,2.06-39,6.4-58.35,4.92-21.87,12.85-42.48,22.68-62.4a251.33,251.33,0,0,1,27-43.49,258.1,258.1,0,0,1,37.5-39.25c8-6.73,15.58-13.93,24.52-19.55,6.46-4.06,14-3.33,20.77-5.68,14.64-5.08,29.85-4.89,44.88-4.77,14.05.11,27.95,2.62,41.78,5.77,13.56,3.09,26.77,7.46,40.36,10.48a51,51,0,0,1,19.39,8.74c7.3,5.43,15.41,9.76,22.94,14.9a205.91,205.91,0,0,1,40.76,36.43,226.13,226.13,0,0,1,17.94,23.82c.58,1.27.64,2.26-1.2,2.22-8.12-3.93-14.89-10-22.58-14.57-10.17-6.1-21.38-8.9-32.68-11.59a95.82,95.82,0,0,0-27.09-2.13,170.33,170.33,0,0,0-47.68,9.51c-17.79,6.18-34.44,14.68-49.36,26.47a157.66,157.66,0,0,0-43.52,53c-5.66,11.16-10.69,22.54-13.7,34.7-2.26,9.18-4.32,18.41-4.54,27.93-.35,15.35-.35,30.7,3.69,45.66a173.44,173.44,0,0,0,23.75,52.86c13.72,20.2,31.65,35.4,52.49,47.63,14.71,8.63,30.72,13.86,46.85,19,7.81,2.48,15.76,1.92,23.64,2.78a168.06,168.06,0,0,0,18.94,1.2c15.69-.08,31.15-2.21,46.69-4,24.63-2.79,48.61-8.53,72.53-14.72,26.05-6.74,51.05-16.44,75.92-26.53a178.35,178.35,0,0,0,34.2-18.26,20.59,20.59,0,0,1,4.38-2.36c3-1.11,5.47,1,4.65,4.06-.76,2.88-1.74,5.8-3.81,8-12.91,14-25.76,28-38.82,41.82-11.12,11.76-24.58,20.77-37.08,30.91-14.15,11.48-30.07,20.13-45.62,29.3a259.64,259.64,0,0,1-35.75,17.42A294.79,294.79,0,0,1,322.1,526c-15.33,2.9-30.64,6.2-46.39,5.76C274.25,531.7,272.58,531.89,270.91,531.85Z" transform="translate(-5.09 -5.6)" fill="#303030"/>
    <path className="f-icon-color-2" d="M784.92,481.24a56.38,56.38,0,0,0-8.07-1.65c-11.8-3.38-24-5.12-35.88-8.2-8.56-2.22-16.29-6.43-24.69-9a226.91,226.91,0,0,1-49.88-22.48c-14.88-8.93-30.21-17.26-44-28C611.11,403.11,599.79,394.4,589,385c-4.19-3.65-8.14-7.68-12.26-11.49-10.52-9.74-20.84-19.72-30.67-30.15q-19.8-21-37.94-43.49c-8.52-10.63-17.82-20.63-26.68-31-8.42-9.84-16.72-19.78-25.09-29.67-4.51-5.32-8.93-10.73-13.58-15.93a644.88,644.88,0,0,0-47.43-48.27c-9.59-8.67-19.86-16.59-29.94-24.71-3.95-3.18-6.48-7.49-9.82-11.13C334,115.61,309.41,95.61,280.55,81.39c-24.12-11.89-49.44-20.16-76.24-23.65-13.88-1.81-27.81-3.46-41.78-2.75A363.15,363.15,0,0,0,126,58.24a206.69,206.69,0,0,1,25.35-16.49c17.74-10,36.5-17.43,56-23.3C225.7,12.93,244.2,9,263.31,7.57c11.63-.85,23.23-2.42,34.9-1.85,25,1.23,49.19,5.69,72.3,16.44A314.86,314.86,0,0,1,440.8,67.07a417.64,417.64,0,0,1,53.69,53.6c11.6,14.07,22.41,28.8,33,43.65,14.55,20.32,29.69,40.22,43.69,60.93,9.21,13.61,18.5,27.16,27.61,40.83,21.91,32.86,43.95,65.65,67.84,97.1,9.82,12.92,20.68,25.08,31.55,37.2,7.47,8.34,15,16.66,23.41,24,11.61,10.17,23.13,20.45,35.21,30.12,10.83,8.67,22.29,16.35,33.76,23.91,1.13.75,1.56,1.57,3.26,3.72A43.94,43.94,0,0,1,784.92,481.24Z" transform="translate(-5.09 -5.6)" fill="#454545"/>
    <path className="f-icon-color-2" d="M992.61,438.58h-1.55q-12.16-2.44-24.35-4.87c-.65-.13-1.44.08-2-.21-13.24-6.92-28.65-7.69-41.84-14.75-9.69-5.18-20-9.47-29-15.71-14.14-9.88-39.52-29.13-45.91-46-.59-4.89,23.16,9.41,28,11.32,7.54,3,15.34,4.07,23.31,5.09A102.3,102.3,0,0,0,938,371.25a125.32,125.32,0,0,0,39.8-18.13c9.66-6.58,18.52-13.8,25.45-23,8.79-11.69,16.77-23.86,21.22-38.17,3.94-12.67,7.79-25.28,6.65-38.63-1.2-14.2-1.44-28.89-9.11-41.53-4.36-7.19-9.33-14.08-14.4-20.89-11.29-15.17-25.63-26.57-42-35.46-11.76-6.39-24.56-10.16-37.72-12.73-12.11-2.36-24.32-2.34-36.49-1.83-10,.41-19.91,2.6-29.81,3.84a241.58,241.58,0,0,0-48.06,10.81c-12.36,4.22-24.59,9.05-36.79,13.81-11.35,4.42-21.89,10.48-33.26,14.69a79,79,0,0,0-12,6.14c-.91.53-1.8,1.13-2.71.35s-.34-1.77,0-2.75c1.41-4.31,5-7.12,7.68-10.4,19.74-23.74,42.15-44.61,67.95-61.7,26-17.23,54.23-29.25,84.87-35a286.24,286.24,0,0,1,37.17-4.52c26-1.42,51,3.37,75.65,10.76,23.47,7,43.23,20.23,61.54,36.19,8.81,7.67,15.12,17.14,22.45,25.93,13.87,16.62,21,36.29,27.81,56.05a137.93,137.93,0,0,1,7,37.69c.12,2.28.24,4.2.33,6.89l.51,19.84c-.27,5.65-.9,11.55-1.56,17.33-1.39,12.2-4.81,23.75-8.93,35.14-5.11,14.09-11,27.89-19.23,40.47-6.57,10-13.48,19.79-21.62,28.58-17.68,19.12-33.13,30.61-61.73,45.8C1000.3,438.33,998.15,438.13,992.61,438.58Z" transform="translate(-5.09 -5.6)" fill="#454545"/>
    <path className="f-icon-color-1" d="M738.86,229c9.8,11.29,19.71,22.49,29.37,33.89,11.6,13.67,22.65,27.81,34.56,41.19,11.31,12.7,22.9,25.2,35.9,36.32a293.13,293.13,0,0,1,29.67,29.41c10.93,12.45,24.19,22,38.39,30.49,13.43,8,28.21,12.44,42.77,17.62a186.72,186.72,0,0,0,60,11c3.14.06,6.17,1.38,9.82,2-4.77,2.36-9.3,5.77-14.31,7.09a233.35,233.35,0,0,1-49.7,17.45c-14.65,3.39-29.41,5.85-44.43,5.46-23-.61-45.39-4.83-65.95-15.4a228.89,228.89,0,0,1-46.2-31,368.18,368.18,0,0,1-38.29-39.35,719.46,719.46,0,0,1-47.16-62.26c-13.79-20.31-27-41-41.18-61.07-12-17.06-23.48-34.58-36.12-51.2-7.81-10.27-16.27-20.08-24.89-29.76a324.88,324.88,0,0,0-39.43-36.79c-8-6.42-15.67-13.06-24.24-18.86-4.4-3-4.74-3.72-4-7.1,1.86-.49,4.1.46,5.72.79,3.92,1.51,8.7,3,12.9,4.27,21.06,6.48,42.36,12.31,62,22.56a314.52,314.52,0,0,1,29.88,17.8c10.33,6.94,20.52,14,30.13,21.93,13.5,11.15,25.9,23.45,38.48,35.58C728.43,216.76,732.2,224.19,738.86,229Z" transform="translate(-5.09 -5.6)" fill="#303030"/>
  </svg>
);

const Header: React.FC<HeaderProps> = ({ currentView, onNavigate, theme, toggleTheme }) => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isAboutOpen, setIsAboutOpen] = useState(false);

  // Prevent body scroll when modal is open
  useEffect(() => {
    if (isAboutOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }
    return () => { document.body.style.overflow = 'unset'; };
  }, [isAboutOpen]);

  const handleNav = (view: ViewState) => {
    onNavigate(view);
    setIsMenuOpen(false);
  };

  const openAbout = () => {
    setIsAboutOpen(true);
    setIsMenuOpen(false);
  };

  const isActive = (view: ViewState) => currentView === view ? 'active' : '';

  return (
    <>
      <header className="sticky-top">
        <nav className="navbar navbar-expand-md">
          <div className="container ps-4 py-2">
            {/* Logo */}
            <div 
              className="proj-brand navbar-brand align-items-center cursor-pointer" 
              onClick={() => handleNav('FORM')}
              style={{ cursor: 'pointer' }}
            >
              <div className="d-flex align-items-center">
                <BrandIconFill className="proj-icon" />
                <span className="proj-name">{PROJ_NAME}</span><span className="fw-normal">{PROJ_VERSION}</span>
              </div>
              <div className="div-description proj-description fw-normal">
                <span className="">{PROJ_DESCRIPTION}</span>
              </div>
            </div>

            {/* Mobile Toggles */}
            <div className="menu d-flex align-items-center gap-2 d-md-none">
              <button
                onClick={toggleTheme}
                className="d-none btn btn-link text-white p-1"
                aria-label="Alternar tema"
              >
                {theme === 'light' ? <Moon size={20} /> : <Sun size={20} />}
              </button>
              <button 
                className="btn btn-link text-whitee p-1"
                onClick={() => setIsMenuOpen(!isMenuOpen)}
                aria-label="Menu"
              >
                {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
              </button>
            </div>

            {/* Desktop Menu */}
            <div className="menu collapse navbar-collapse d-none d-md-block">
              <ul className="navbar-nav ms-auto align-items-center">
                <li className="nav-item">
                  <button 
                    onClick={() => handleNav('FORM')}
                    className={`nav-link btn btn-link text-decoration-none d-flex align-items-center gap-2 px-3 ${isActive('FORM')}`}
                  >
                    <PlusCircle size={16} /> Novo
                  </button>
                </li>
                <li className="nav-item">
                  <button 
                    onClick={() => handleNav('LIST')}
                    className={`nav-link btn btn-link text-decoration-none d-flex align-items-center gap-2 px-3 ${isActive('LIST')}`}
                  >
                    <List size={16} /> Registros
                  </button>
                </li>
                <li className="nav-item">
                  <button 
                    onClick={() => handleNav('DASHBOARD')}
                    className={`nav-link btn btn-link text-decoration-none d-flex align-items-center gap-2 px-3 ${isActive('DASHBOARD')}`}
                  >
                    <BarChart3 size={16} /> Dashboard
                  </button>
                </li>
                {/* Novo Item: Sobre */}
                <li className="nav-item">
                  <button 
                    onClick={openAbout}
                    className="nav-link btn btn-link text-decoration-none d-flex align-items-center gap-2 px-3"
                  >
                    <Info size={16} /> Sobre
                  </button>
                </li>

                <li className="d-none nav-item ms-2 border-start border-white border-opacity-25 ps-3">
                  <button
                    onClick={toggleTheme}
                    className="btn btn-link text-white p-1"
                    aria-label="Alternar tema"
                  >
                    {theme === 'light' ? <Moon size={20} /> : <Sun size={20} />}
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        {/* Mobile Menu Dropdown */}
        {isMenuOpen && (
          <div className="menu menu-open bg-primarye border-top border-white border-opacity-10 d-md-none animate-fade-in shadow-lg">
            <style>
              {`
                .mobile-nav-item { 
                  transition: all 0.2s ease; 
                  border-radius: 0.5rem; 
                }
                .mobile-nav-item:hover { 
                  background-color: rgba(0,0,0, 0.15) !important; 
                  padding-left: 1.25rem !important; /* Slight indent effect */
                }
                .mobile-nav-item:active { 
                  background-color: rgba(0,0,0, 0.25) !important; 
                  transform: scale(0.99);
                }
              `}
            </style>
            <div className="container py-3">
              <div className="d-flex flex-column gap-2">
                  <button 
                    onClick={() => handleNav('FORM')}
                    className={`btn text-start d-flex align-items-center gap-3 py-3 px-3 mobile-nav-item ${currentView === 'FORM' ? 'bg-white bg-opacity-25 fw-bold' : ''}`}
                  >
                    <PlusCircle size={20} /> Novo Registro
                  </button>
                  <button 
                    onClick={() => handleNav('LIST')}
                    className={`btn text-start d-flex align-items-center gap-3 py-3 px-3 mobile-nav-item ${currentView === 'LIST' ? 'bg-white bg-opacity-25 fw-bold' : ''}`}
                  >
                    <List size={20} /> Listar Registros
                  </button>
                  <button 
                    onClick={() => handleNav('DASHBOARD')}
                    className={`btn text-start d-flex align-items-center gap-3 py-3 px-3 mobile-nav-item ${currentView === 'DASHBOARD' ? 'bg-white bg-opacity-25 fw-bold' : ''}`}
                  >
                    <BarChart3 size={20} /> Dashboard
                  </button>
                  {/* Novo Item Mobile: Sobre */}
                  <button 
                    onClick={openAbout}
                    className="btn text-start d-flex align-items-center gap-3 py-3 px-3 mobile-nav-item"
                  >
                    <Info size={20} /> Sobre
                  </button>
              </div>
            </div>
          </div>
        )}
      </header>

      {/* Modal Sobre */}
      {isAboutOpen && (
        <>
          <div className="modal fade show d-block" tabIndex={-1} role="dialog" style={{ zIndex: 1060 }}>
            <div className="modal-dialog modal-dialog-centered">
              <div className="modal-content border-0 shadow-lg">
                <div className="modal-header border-bottom bg-body-tertiary">
                  <h5 className="modal-title fw-bold d-flex align-items-center">
                    <Info className="me-2 text-primary" size={24} />
                    Sobre o Projeto
                  </h5>
                  <button type="button" className="btn-close" onClick={() => setIsAboutOpen(false)} aria-label="Close"></button>
                </div>
                <div className="modal-body p-4">
                  
                  {/* ==========================================================
                      ÁREA RESERVADA PARA O DESENVOLVEDOR INSERIR INFORMAÇÕES
                      ========================================================== */}
                  
                  <div className="proj-brand text-center mb-4">
                    <div className="d-inline-flex align-items-center justify-content-center p-0 mb-2">
                      <BrandIconFill style={{ width: 48, height: 48 }} />
                    </div>
                    <h4 className="proj-name m-0 p-0 lh-1">{PROJ_NAME}</h4>
                    <p className="text-muted m-0 mb-3 lh-1">{PROJ_DESCRIPTION}</p>
                    <span className="badge bg-info bg-opacity-10 text-secondary border border-secondary border-opacity-25 rounded-pill mb-3">
                      Versão {Proj_version_full}
                    </span>
                  </div>

                  <hr className="my-4 opacity-25" />

                  {/* 
                      !!! DESENVOLVEDOR: INSIRA AQUI O CONTEÚDO SOBRE O PROJETO !!!
                      Exemplo: Tecnologias usadas, objetivo, funcionalidades, etc.
                  */}
                  <div className="mb-4 hide">
                    <h6 className="fw-bold text-uppercase text-muted small mb-3">Sobre a Aplicação</h6>
                    <div className="p-3 bg-light rounded border border-light-subtle text-secondary small">
                       {/* --- ESPAÇO PARA TEXTO DO PROJETO --- */}
                       <div className="m-auto justify-self-end">Em breve</div>
                    </div>
                  </div>

                  {/* 
                      !!! DESENVOLVEDOR: INSIRA AQUI O CONTEÚDO SOBRE O DESENVOLVEDOR !!!
                      Exemplo: Nome, contato, links sociais, etc.
                  */}
                  <div className="">
                    <h6 className="fw-bold text-uppercase text-muted small mb-3">Desenvolvedor</h6>
                     <div className="p-2 text-secondary d-flex align-items-center opacity-75">
                       {/* --- ESPAÇO PARA TEXTO DO DESENVOLVEDOR --- */}
                       <div className="pe-2 align-items-center border-end border-secondary">
                           {/*<FuoneBrand className="icon" style={{ width: 48, height: 48,}} />{/**/}
                          <FuoneBrand3 className="icon" style={{ width: 72, height: 48,}} />{/**/}
                        </div>
                       <div className="ps-2 border-left border-secondary">
                        <div className="fw-bold fs-6" style={{ lineHeight: 'normal' }}><a className=" text-muted no-decoration" href="https://b.link/f/aboutme" target="_blank">FuoneDev</a></div>
                        <div className="small"style={{ lineHeight: 'normal' }}><a className=" text-muted no-decoration" href="mailto:fuone.dev@gmail.com" target="_blank">fuone.dev@gmail.com</a></div>
                       </div>
                    </div>
                  </div>
                  
                  {/* ==========================================================
                      FIM DA ÁREA RESERVADA
                      ========================================================== */}

                </div>
                <hr className="my-1 opacity-25" />
                <div className="modal-footer bg-light border-top-0">
                  <button type="button" className="btn btn-sm btn-light d-flex align-items-center px-3 py-2 fw-medium transition-all hint--top hint--rounded" 
                    data-hint="Fechar"
                    onClick={() => setIsAboutOpen(false)}>                    
                    <X size={18} />
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div className="modal-backdrop fade show" style={{ zIndex: 1055 }}></div>
        </>
      )}
    </>
  );
};

export default Header;
